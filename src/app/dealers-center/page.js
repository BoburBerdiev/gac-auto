"use client"
  const map =
  [
    {
      "_id": "64e329959f374cf8f27e0fa5",
      "nameRu": "Leapmotorca",
      "nameUz": "Leapmotorca",
      "addressRu": "Проспект Амира Темура 40, Юнусабадский р-н, г.Ташкент, Узбекистан",
      "addressUz": "Amir Temur shoh ko‘chasi, 40, Yunusobod tumani, Toshkent, O‘zbekiston",
      "workingTime": "09:00-20:00",
      "tel": "+998 78 141 88 88",
      "lat": "41.318578",
      "lng": "69.283104",
      "__v": 0,
      "link": "https://leapmotorca.uz/"
    },
    {
      "_id": "656ac99ccc3e722e214c4e82",
      "nameRu": "Бухара",
      "nameUz": "Бухара",
      "addressRu": "Минарай Калон, улица Хакикат, Бухара",
      "addressUz": "Buxoro, Xakikat ko‘chasi, Minorai Kalon",
      "workingTime": "9:00-20:00",
      "tel": "+998 78 141 88 88",
      "lat": "39.77637621350259",
      "lng": "64.41499649793205",
      "link": "https://buxoro.leapmotorca.uz/",
      "__v": 0
    },
    {
      "_id": "656aca33cc3e722e214c4e96",
      "nameRu": "Самарканд",
      "nameUz": "Samarqand",
      "addressRu": "Registon, Регистан улица, Samarqand",
      "addressUz": "Samarqand, Registon ko'chasi",
      "workingTime": "9:00-20:00",
      "tel": "+998 78 141 88 88",
      "lat": "39.65520052164059",
      "lng": "66.97591781616211",
      "link": "https://samarqand.leapmotorca.uz/",
      "__v": 0
    },
    {
      "_id": "656acb1dcc3e722e214c4eaa",
      "nameRu": "ООО \"LIP MOTORS FERGHANA\"",
      "nameUz": "ООО \"LIP MOTORS FERGHANA\"",
      "addressRu": "г.Фергана, ул.Б.Маргинони, 47",
      "addressUz": "Farg'ona shahar B.Marg'inoniy ko'chasi 47-uy",
      "workingTime": "9:00-20:00",
      "tel": "+998 78 141 88 88",
      "lat": "40.439369123208024",
      "lng": "71.76652302216162",
      "link": "https://fargona.leapmotorca.uz/",
      "__v": 0
    },
    {
      "_id": "656acdd5cc3e722e214c4ebe",
      "nameRu": "Наманган",
      "nameUz": "Namangan",
      "addressRu": "Наманган, Чустская городская администрация",
      "addressUz": "Namangan, Chust shahar hokimligi",
      "workingTime": "9:00-20:00",
      "tel": "+998 78 141 88 88",
      "lat": "40.99779579986986",
      "lng": "71.22839762235463",
      "link": "https://namangan.leapmotorca.uz/",
      "__v": 0
    },
    {
      "_id": "656ad01bcc3e722e214c4ed8",
      "nameRu": "ООО «TREND AUTO-MOTORS» ",
      "nameUz": "ООО «TREND AUTO-MOTORS» ",
      "addressRu": "г. Андижан, Алтынкульский р-н,  ул. Узбекистанская, дом 33",
      "addressUz": "Andijon, Oltinko'l tumani, st. Uzbekistanskaya, 33-uy",
      "workingTime": "9:00-20:00",
      "tel": "+998 78 141 88 88",
      "lat": "40.80106631940733",
      "lng": "72.16048918913607",
      "link": "https://andijon.leapmotorca.uz/",
      "__v": 0
    },
    {
      "_id": "656ad23bcc3e722e214c4f07",
      "nameRu": "Джизак",
      "nameUz": "Джизак",
      "addressRu": "Джизакская городская администрация",
      "addressUz": "Jizzax shahar xokimligi",
      "workingTime": "9:00-20:00",
      "tel": "+998 78 141 88 88",
      "lat": "40.13218243210207",
      "lng": "67.82334566116333",
      "link": "https://jizzax.leapmotorca.uz/",
      "__v": 0
    },
    {
      "_id": "656ad42bcc3e722e214c4f23",
      "nameRu": "Каракалпакстан",
      "nameUz": "Qoraqalpog'iston",
      "addressRu": "Администрация города Каракалпакстана",
      "addressUz": "Qoraqalpog‘iston shahar xokimyati",
      "workingTime": "9:00-20:00",
      "tel": "+998 78 141 88 88",
      "lat": "42.46697075189716",
      "lng": "59.61975631143721",
      "link": "https://qoraqalpogiston.leapmotorca.uz/",
      "__v": 0
    },
    {
      "_id": "656ad6aacc3e722e214c4f37",
      "nameRu": "ООО «AUTO MALL» ",
      "nameUz": "ООО «AUTO MALL» ",
      "addressRu": "Қашқадарё вилояти, Қарши шаҳри,   Қавали МФЙ, Жайхун кўчаси 33",
      "addressUz": "Qashqadaryo viloyati, Qarshi shahri Qavali MFY, Jayxun ko'chasi 33-uy",
      "workingTime": "9:00-20:00",
      "tel": "+998 78 141 88 88",
      "lat": "38.81282240869236",
      "lng": "65.81365983723903",
      "link": "https://qashqadaryo.leapmotorca.uz/",
      "__v": 0
    },
    {
      "_id": "656ad7cccc3e722e214c4f4d",
      "nameRu": "Сурхандарьинская",
      "nameUz": "Surxondaryo",
      "addressRu": "Сурхандарьинская, Термезская городская администрация",
      "addressUz": "Surxondaryo, Termiz shahar hokimligi",
      "workingTime": "9:00-20:00",
      "tel": "+998 78 141 88 88",
      "lat": "37.229303292139896",
      "lng": "67.27572441101074",
      "link": "https://surxondaryo.leapmotorca.uz/",
      "__v": 0
    },
    {
      "_id": "656ad956cc3e722e214c4f62",
      "nameRu": "Сырдарья",
      "nameUz": "Sirdaryo",
      "addressRu": "Сырдарья, Гулистанская городская администрация, Гулистан",
      "addressUz": "Sirdaryo, Guliston shahar hokimligi, Гулистан",
      "workingTime": "9:00-20:00",
      "tel": "+998 78 141 88 88",
      "lat": "40.4970434209306",
      "lng": "68.77606630325317",
      "link": "https://sirdaryo.leapmotorca.uz/",
      "__v": 0
    },
    {
      "_id": "656adb84cc3e722e214c4f78",
      "nameRu": "Хорезм",
      "nameUz": "Xorazm",
      "addressRu": "Хорезм, Ургенчская городская администрация.",
      "addressUz": "Xorazm, Urganch shahar hokimligi",
      "workingTime": "9:00-20:00",
      "tel": "+998 78 141 88 88",
      "lat": "41.562096123743196",
      "lng": "60.62582015991211",
      "link": "https://xorazm.leapmotorca.uz/",
      "__v": 0
    },
    {
      "_id": "661e5d3bd60ae37537bec1e8",
      "nameRu": "ООО «DRIVE SMART» ",
      "nameUz": "ООО «DRIVE SMART» ",
      "addressRu": "г. Ташкент, Юнусабадский район,  ул. Зиелилар дом 1б",
      "addressUz": "Toshkent shahri, Yunusobod tumani, st. Zielilar uyi 1b",
      "workingTime": "9:00-20:00",
      "tel": "+998781418888",
      "lat": "41.336245893788494",
      "lng": "69.32004735661188",
      "link": "https://leapmotorca.uz/",
      "__v": 0
    }
  ]
  const filial = [
    {
      "_id": "64e26d4f9f374cf8f27e0dda",
      "image": {
        "name": "9b94cd72-5295-4a74-881b-702e9d0ce325-store-section-1-1bg.jpg",
        "path": "media/9b94cd72-5295-4a74-881b-702e9d0ce325-store-section-1-1bg.jpg",
        "_id": "64e26d3a9f374cf8f27e0dd7",
        "__v": 0
      },
      "titleRu": "Центр опыта и продаж",
      "titleUz": "Tajriba va savdo markazi",
      "__v": 0
    },
    {
      "_id": "64e26d9d9f374cf8f27e0de0",
      "image": {
        "name": "1d2e74b0-b65e-469b-a60a-ba4ed2e15bb9-store-section-1-2bg.jpg",
        "path": "media/1d2e74b0-b65e-469b-a60a-ba4ed2e15bb9-store-section-1-2bg.jpg",
        "_id": "64e26d7f9f374cf8f27e0ddd",
        "__v": 0
      },
      "titleRu": "Центр доставки и обслуживания",
      "titleUz": "Yetkazib berish va xizmat ko'rsatish markazi",
      "__v": 0
    }
  ]
  const filialInner = [
    {
      "_id": "64e26e5d9f374cf8f27e0df2",
      "images": [
        {
          "name": "8fe27b53-e229-48df-b12d-b6006ee53888-store-section-2-4bg.jpg",
          "path": "media/8fe27b53-e229-48df-b12d-b6006ee53888-store-section-2-4bg.jpg",
          "_id": "64e26e479f374cf8f27e0ded",
          "__v": 0
        },
        {
          "name": "5410e3d7-f56b-46c4-9a4f-0d878d7125bd-store-section-2-3bg.jpg",
          "path": "media/5410e3d7-f56b-46c4-9a4f-0d878d7125bd-store-section-2-3bg.jpg",
          "_id": "64e26e479f374cf8f27e0dee",
          "__v": 0
        }
      ],
      "__v": 0
    },
    {
      "_id": "653a6ca6d05931a467f76cac",
      "images": [
        {
          "name": "39babd8a-9178-47ea-a81c-d258d22a5fc1-60c86233-5658-414b-b02f-2d271a11110d-store-section-2-2bg.jpg",
          "path": "media/39babd8a-9178-47ea-a81c-d258d22a5fc1-60c86233-5658-414b-b02f-2d271a11110d-store-section-2-2bg.jpg",
          "_id": "653a6ca6d05931a467f76ca7",
          "__v": 0
        },
        {
          "name": "b5416cd1-a84e-4adf-be04-6a275b0d6230-60c86233-5658-414b-b02f-2d271a11110d-store-section-2-2bg.jpg",
          "path": "media/b5416cd1-a84e-4adf-be04-6a275b0d6230-60c86233-5658-414b-b02f-2d271a11110d-store-section-2-2bg.jpg",
          "_id": "653a6ca6d05931a467f76ca8",
          "__v": 0
        }
      ],
      "__v": 0
    }
  ]
export default function Page() {
  return (
    <>
      <div className={'bg-black store'}>
                <div className={'h-auto md:min-h-screen w-full relative bg-[#f5f5f5] '}>
                    <GoogleMap mapData={map}/>
                </div>
                <header className="bg-black lg:pt-[60px] h-[100vh] ">
                    <div className="grid w-full h-full gap-4 overflow-x-hidden overflow-y-hidden lg:grid-cols-2">
                        {
                            filial?.map(item=>(
                        <StoreBox key={item?._id} text={'ru'  ==='ru' ? item?.titleRu: item?.titleUz} bg={`/bg-car-inner.jpg`}/>

                            ))
                        }
                    </div>
                </header>
            </div>
    </>
  )
}



import { useState } from 'react';
import { GoogleMap as GoogleMapComponent, InfoWindowF, MarkerF, useLoadScript } from "@react-google-maps/api";
import { RiMapPinLine, RiPhoneLine, RiTimeLine } from "react-icons/ri";
import { IoEarthOutline } from "react-icons/io5";
import { ImgUI } from '@/components'

const GoogleMap = ({ mapData }) => {
  const { isLoaded, loadError } = useLoadScript({
    googleMapsApiKey: process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY,
  });

  const [mapRef, setMapRef] = useState();
  const [isOpen, setIsOpen] = useState(false);
  const [infoWindowData, setInfoWindowData] = useState();

  const onLoad = (map) => {
    setMapRef(map);
    map.setCenter({ lat: 41.337380, lng: 64.478760 });
    map.setZoom(7);
  };

  const handleMarkerClick = (id, lat, lng, addressRu, addressUz, nameRu, nameUz, workingTime, tel, link) => {
    mapRef?.panTo({ lat, lng });
    setInfoWindowData({ id, addressRu, addressUz, nameRu, nameUz, workingTime, tel, link });
    setIsOpen(true);
  };

  if (loadError) {
    return <div>Error loading maps</div>;
  }

  if (!isLoaded) {
    return <div>Loading...</div>;
  }

  return (
    <div className="h-[400px] md:h-screen">
      <GoogleMapComponent
        mapContainerClassName="map-container"
        onLoad={onLoad}
        options={{ mapId: '5d4e37b408dbedeb' }}
      >
        {mapData.map(({ lat, lng, addressRu, addressUz, nameRu, nameUz, workingTime, tel, link }, ind) => (
          <MarkerF
            position={{ lat: Number(lat), lng: Number(lng) }}
            key={ind}
            icon={{
              url: '/store-checked.png',
              scaledSize: new window.google.maps.Size(45, 50),
            }}
            onClick={() => handleMarkerClick(ind, Number(lat), Number(lng), addressRu, addressUz, nameRu, nameUz, workingTime, tel, link)}
          >
            {isOpen && infoWindowData?.id === ind && (
              <InfoWindowF onCloseClick={() => setIsOpen(false)}>
                <div className={'space-y-3'}>
                  <h3 className={'text-xl'}>{infoWindowData.nameRu}</h3>
                  <div className={'space-y-2'}>
                    <div className={'flex items-start gap-3'}>
                      <RiMapPinLine className={'text-lg flex-shrink-0'} />
                      <p className={'break-all text-[#666666]'}>{infoWindowData.addressRu}</p>
                    </div>
                    <div className={'flex items-start gap-3'}>
                      <RiTimeLine className={'text-lg flex-shrink-0'} />
                      <p className={'break-all text-[#666666]'}>{infoWindowData.workingTime}</p>
                    </div>
                    <div className={'flex items-start gap-3'}>
                      <RiPhoneLine className={'text-lg flex-shrink-0'} />
                      <p className={'break-all text-[#666666]'}>{infoWindowData.tel}</p>
                    </div>
                    <div className={'flex items-start gap-3'}>
                      <IoEarthOutline className={'text-lg flex-shrink-0'} />
                      <a target={'_blank'} href={infoWindowData.link} className={'break-all text-[#666666]'}>{infoWindowData.link}</a>
                    </div>
                  </div>
                </div>
              </InfoWindowF>
            )}
          </MarkerF>
        ))}
      </GoogleMapComponent>
    </div>
  );
};




const StoreBox = ({text, bg}) => {
    return (
        <>
            {text ? (
                <div className="h-[50vh] lg:h-[100vh] relative   overflow-hidden group">
                    <div className="w-full h-full transition duration-1000 hover:scale-105 relative">
         

                        <ImgUI src={bg} fill imageStyle="object-cover w-full h-full" alt={text}/>
                    </div>
                </div>
            ) : (
                <div className=" col-span-1 lg:col-span-2 grid grid-cols-1 lg:grid-cols-2 ">
                    {
                        bg?.map(image => (
                        <div  key={image?._id}  className={' h-[242px] lg:h-[485px] w-full relative'}>

                                    <ImgUI src={`/logo.png`} 
                                           imageStyle="object-cover w-full h-full" alt={'filial inner'}/>

                    </div>
                            )
                        )
                    }
                </div>
            )}
        </>
    );
};
